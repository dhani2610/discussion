<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Table</title>
</head>
<body>
    <table>
        <tr>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">No</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">Tanggal Monitoring / Verifikasi (DD-MM-YYYY) (WAJIB DIISI)</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">Nama Petugas Moniver</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">Latitude</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">Longtitude</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">No. Kartu Keluarga (WAJIB DIISI)</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">Nama Kepala Keluarga</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">Alamat</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">RT</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">RW</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">Jumlah Jiwa</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">Jumlah Jiwa Yang Menetap</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="7">Desa / Kelurahan (Kode ID) (WAJIB DIISI)</td>
            <td style="border: 1px solid black;text-align:center;" colspan="16">
                <center>
                    Pertanyaan Pengamatan Pilar 1
                </center>
            </td>
            <td style="border: 1px solid black;text-align:center;" colspan="16">
                <center>
                    Pertanyaan Pengamatan Pilar 3
                </center>
            </td>
            <td style="border: 1px solid black;text-align:center;" colspan="4">
                <center>
                    Pertanyaan Pengamatan Pilar 4
                </center>
            </td>
            <td style="border: 1px solid black;text-align:center;" colspan="3">
                <center>
                    Pertanyaan Pengamatan Pilar 5
                </center>
            </td>
            
        </tr>
       
        <tr>
            {{-- <td style="border: 1px solid black;text-align:center;" colspan="2"></td> --}}
            <td style="border: 1px solid black;text-align:center;" rowspan="5">Buang Air Besar Di Jamban</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="5">Jamban Milik Sendiri</td>
            <td style="border: 1px solid black;text-align:center;" colspan="4">Bangunan Bawah (Pilih Hanya Satu)</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="5">Kloset Leher Angsa/Teknologi lain yang mencegah vektor dan binatang pengganggu masuk</td>
            {{-- <td style="border: 1px solid black;text-align:center;" colspan=""></td> --}}
            <td style="border: 1px solid black;text-align:center;" colspan="4">
                <center>
                    Fisik CTPS
                </center>
            </td>
            <td style="border: 1px solid black;text-align:center;" rowspan="5">Mampu mempraktekkan cara cuci tangan pakai sabun</td>
            <td style="border: 1px solid black;text-align:center;" colspan="4">
                <center>
                    Mengetahui waktu-waktu kritis cuci tangan pakai sabun (Minimal dapat menjawab 3 waktu kritis)
                </center>
            </td>
            <td style="border: 1px solid black;text-align:center;" colspan="10">
                <center>
                    Sumber Air
                </center>
            </td>
            <td style="border: 1px solid black;text-align:center;" colspan="3" rowspan="2">
                <center>
                    Pengelolaan Air
                </center>
            </td>
            <td style="border: 1px solid black;text-align:center;" colspan="3" rowspan="2">
                <center>
                    Pengelolaan Pangan Aman
                </center>
            </td>

             {{-- pilar 4  --}}
             <td style="border: 1px solid black;text-align:center;" rowspan="5">Tidak ada sampah berserakan di lingkungan sekitar rumah</td>
             <td style="border: 1px solid black;text-align:center;" rowspan="5">Ada tempat sampah yang tertutup, kuat dan mudah dibersihkan</td>
             <td style="border: 1px solid black;text-align:center;" rowspan="5">Ada perlakuan yang aman (tidak dibakar, tidak dibuang ke sungai/kebun/saluran drainase/ tempat terbuka)</td>
             <td style="border: 1px solid black;text-align:center;" rowspan="5">Telah melakukan pemilahan sampah</td>

             {{-- pilar 5  --}}
             <td style="border: 1px solid black;text-align:center;" rowspan="5">Tidak terlihat genangan air di sekitar rumah karena limbah cair domestik (Limbah cair yang tergenang dapat menjadi sumber dari vektor penyakit, termasuk kran umum atau WC umum)</td>
             <td style="border: 1px solid black;text-align:center;" rowspan="5">Ada saluran pembuangan limbah cair rumah tangga (non kakus) yang kedap dan tertutup.</td>
             <td style="border: 1px solid black;text-align:center;" rowspan="5">Terhubung dengan sumur resapan dan atau sistem pengolahan limbah (IPAL Komunal/ sewerage system)</td>
        </tr>
        
        <tr>
            <td style="border: 1px solid black;text-align:center;" rowspan="4">Tangki septik disedot setidaknya sekali dalam 3-5 tahun terakhir atau disalurkan ke Sistem Pengolahan Air Limbah Domestik (SPALD)</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="4">Tangki septik yang tidak pernah disedot, atau disedot lebih dari 5 tahun terakhir, atau termasuk rumah baru dibangun</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="4">Cubluk / Lubang Tanah</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="4">Dibuang langsung ke drainase/kolam/ sawah/ sungai/danau/laut dan pantai/ tanah lapang/kebun</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="4">Memiliki Sarana</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="4">Memiliki Air Mengalir</td>
            <td style="border: 1px solid black;text-align:center;" colspan="2" rowspan="4">Memiliki Sabun</td>
            {{-- <td style="border: 1px solid black;text-align:center;"></td>   --}}
            <td style="border: 1px solid black;text-align:center;" rowspan="4">Sebelum makan</td>
            <td style="border: 1px solid black;text-align:center;" rowspan="4">Sebelum mengolah dan menghidangkan makanan</td>
            <td style="border: 1px solid black;text-align:center;" colspan="2" rowspan="4" >Sebelum menyusui anak, Sebelum memberi makan bayi / Balita</td>
            <td style="border: 1px solid black;text-align:center;" colspan="5">
                <center>
                    Layak
                </center>
            </td>
            <td style="border: 1px solid black;text-align:center;" colspan="5">
                <center>
                    Tidak Layak
                </center>
            </td>
        </tr>
        <tr>
            {{-- layak  --}}
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Layak : Perpipaan</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Layak : Kran Umum</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Layak : Sumur Bor / Pompa / Sumur Gali Yang Terlindungi</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Layak : Mata Air Terlindung</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Layak : Air Hujan</td>
           
            {{-- tidak layak  --}}
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Tidak Layak : Sungai / Mata Air Tidak Terlindungi</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Tidak Layak : Danau / Kolam / Sumur Gali Tidak Terlindungi</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Tidak Layak : Waduk</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Tidak Layak : Kolam</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Tidak Layak : Irigasi</td>

            {{-- Pengelolaan air  --}}
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Yang melalui proses pengolahan (misal : merebus, klorin cair/klorin padat, UV, sodis, Filtrasi, keramik filter, RO)</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Jika air baku keruh dilakukan pengolahan, seperti : pengendapan atau penyaringan</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">Menyimpan air minum di dalam wadah yang tertutup rapat, kuat, terbuat dari bahan stainless steel, keramik, kaca dan jika terbuat dari plastik tanda gelas dan garpu) dan diambil dengan cara yang aman (tidak tersentuh tangan atau mulut)</td>


            {{-- Pengelolaan pangan  --}}
            <td rowspan="3" style="border: 1px solid black;text-align:center;">pangan tertutup dengan baik dengan penutup yang bersih </td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">pangan tidak berdekatan bahan berbahaya dan beracun (deterjen, pestisida, cairan obat nyamuk, dan sejenisnya)</td>
            <td rowspan="3" style="border: 1px solid black;text-align:center;">melakukan praktik penanganan pangan yang baik dan benar, sesuai 5 Kunci Keamanan Pangan</td>
        </tr>

        <tr>
            <td style="border: 1px solid black;text-align:center;"></td>
        </tr>
        <tr>
            <td style="border: 1px solid black;text-align:center;"></td>
        </tr>
        <tr>
            @php
                $range = range(1, 38);
            @endphp
            @foreach ($range as $item)
                @if ($item == 15)
                    <td style="border: 1px solid black;text-align:center;" colspan="2">
                @else
                    <td style="border: 1px solid black;text-align:center;">
                @endif
                    <center>
                        ( Ya / Tidak )
                    </center>
                </td>
            @endforeach
        </tr>

        {{-- INTEGRASI DATA  --}}
        @foreach ($monitoring as $s)
        <tr>
            <td style="border: 1px solid black;text-align:center;">{{ $loop->iteration }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ \Carbon\Carbon::parse($s->tanggal_monitoring)->format('d/m/Y') }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->nama_petugas }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->latitude ?? '-' }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->longtitude ?? '-' }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ '`'.$s->no_kk }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->nama_kepala_keluarga }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->alamat }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->rt }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->rw }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->jumlah_jiwa }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->jumlah_jiwa_menetap }}</td>
            <td style="border: 1px solid black;text-align:center;">{{ $s->desa_kelurahan }}</td>

            {{-- Pilar Data 1--}}
                @for ($j = 1; $j <= 7; $j++)
                    @php
                        $questionKey = "pertanyaan_{$j}_pilar_1";
                        $value = $s->$questionKey ?? '-';  // Use '-' if value is null
                    @endphp
                    @if ( $value != '-')
                        <td style="border: 1px solid black;text-align:center;">{{ $value }} </td>
                    @endif
                @endfor

                @for ($j = 1; $j <= 8; $j++)
                    @php
                        $questionKeyPilar2 = "pertanyaan_{$j}_pilar_2";
                        $valuePilar2 = $s->$questionKeyPilar2 ?? '-';  // Use '-' if value is null
                    @endphp
                    @if ( $valuePilar2 != '-')
                        @if ($j == 8 )
                            <td style="border: 1px solid black;text-align:center;" colspan="2">{{ $valuePilar2 }}</td>
                        @else
                            <td style="border: 1px solid black;text-align:center;">{{ $valuePilar2 }}</td>
                        @endif
                    @endif
                @endfor

                {{-- pilar 3 --}}
                @for ($j = 1; $j <= 16; $j++)
                    @php
                        $questionKeyPilar3 = "pertanyaan_{$j}_pilar_3";
                        $valuePilar3 = $s->$questionKeyPilar3 ?? '-';  // Use '-' if value is null
                    @endphp
                    @if ( $valuePilar3 != '-')
                        <td style="border: 1px solid black;text-align:center;">{{ $valuePilar3 }}</td>
                    @endif
                @endfor

                {{-- pilar 4  --}}
                @for ($j = 1; $j <= 4; $j++)
                    @php
                        $questionKeyPilar4 = "pertanyaan_{$j}_pilar_4";
                        $valuePilar4 = $s->$questionKeyPilar4 ?? '-';  // Use '-' if value is null
                    @endphp
                    @if ( $valuePilar4 != '-')
                        <td style="border: 1px solid black;text-align:center;">{{ $valuePilar4 }}</td>
                    @endif
                @endfor

                {{-- pilar 5  --}}
                @for ($j = 1; $j <= 3; $j++)
                    @php
                        $questionKeyPilar5 = "pertanyaan_{$j}_pilar_5";
                        $valuePilar5 = $s->$questionKeyPilar5 ?? '-';  // Use '-' if value is null
                    @endphp
                    @if ( $valuePilar5 != '-')
                        <td style="border: 1px solid black;text-align:center;">{{ $valuePilar5 }}</td>
                    @endif
                @endfor
        </tr>
        @endforeach
    </table>
    
</body>
</html>